# WASM CPU微架构指纹识别系统

基于WebAssembly的CPU微架构特征检测工具，能够通过性能测试识别不同的CPU架构和型号。

## 🎯 项目目标

利用WASM的确定性执行环境来探测CPU微架构差异：
- L1/L2/L3缓存特征
- 分支预测器行为
- 乱序执行特征
- 内存访问模式
- 浮点/整数性能比例

## 📁 项目结构

```
/
├── enhanced-detection.html    # 主要检测界面
├── src/
│   ├── wasm/                  # WASM C源代码
│   │   ├── memory-tests.c     # 内存访问测试
│   │   └── compute-tests.c    # 计算性能测试
│   └── common.js              # 共享JS库
├── build/                     # 编译输出
│   ├── wasm-fingerprint.js    # WASM模块
│   └── wasm-fingerprint.wasm
├── examples/                  # 示例和工具
│   ├── basic-detection.html   # 基础检测示例
│   ├── validation-tests.html  # 代码验证工具
│   └── diagnostic-tool.html   # 诊断工具
├── docs/                      # 文档
└── tools/                     # 构建工具
```

## 🚀 快速开始

1. **启动本地服务器**
   ```bash
   python3 -m http.server 9000
   ```

2. **访问主界面**
   ```
   http://localhost:9000/enhanced-detection.html
   ```

3. **运行检测**
   - 点击"基础检测"查看当前能力
   - 点击"增强检测"查看理论方案
   - 点击"特征签名分析"进行详细分析

## 🔧 构建

需要安装Emscripten SDK：

```bash
# 激活环境
source emsdk/emsdk_env.sh

# 编译WASM模块
make
```

## 📊 检测原理

### 内存访问测试
- **顺序访问**: 测试缓存友好的访问模式
- **随机访问**: 测试缓存未命中的影响
- **时间比例**: 反映CPU缓存架构差异

### 计算性能测试
- **浮点精度**: 不同FPU的舍入误差
- **整数优化**: 编译器和CPU优化差异
- **向量计算**: SIMD指令支持情况
- **分支预测**: 条件分支的执行效率

## 🎯 预期结果

不同CPU架构的特征签名：

| CPU类型 | 内存比例 | 特征 |
|---------|----------|------|
| Apple Silicon | 1.0-1.5 | 统一内存，优秀预取 |
| Intel高端 | 1.5-2.5 | 强大缓存层次 |
| AMD Ryzen | 1.5-3.0 | 平衡设计 |
| ARM移动 | 2.0-4.0 | 功耗优化 |

## ⚠️ 限制

- 浏览器安全策略限制高精度计时
- WASM沙盒环境标准化了部分硬件差异
- 需要大量真实设备数据来训练分类模型

## 🔬 技术细节

项目使用了以下技术来突破WASM限制：
- 性能计时器精度优化
- 微基准测试设计
- 统计分析方法
- 特征工程技术

## 📈 未来改进

1. **增加测试维度**
   - TLB特性检测
   - 缓存行为分析
   - 指令延迟测试

2. **机器学习分类**
   - 训练特征识别模型
   - 自动化型号推测
   - 置信度评估

3. **数据库建设**
   - 收集真实设备数据
   - 建立特征数据库
   - 持续模型训练